[1müöÄ Starting Dota Data Backend Orchestration System Tests[0m
[34mBase URL: http://localhost:3000[0m
[34mTest Configuration:[0m
[34m  Team ID: 2586976[0m
[34m  League ID: 1234[0m
[34m  Match ID: 1234567890[0m
[34m  Player ID: 123456789[0m
[36m
PRE-CLEANUP. Removing any existing test files from previous runs[0m
[36m
CLEANUP. Cleaning up test files and cache[0m
[34m‚ÑπÔ∏è  No files to clean in Mock data files (APP)[0m
[34m‚ÑπÔ∏è  Deleted file: logs/server.log[0m
[32m‚úÖ Cleaned up 1 files from Server log files (APP)[0m
[34m‚ÑπÔ∏è  No files to clean in Cache files (TEST)[0m
[34m‚ÑπÔ∏è  No files to clean in Test result files (TEST)[0m
[34m‚ÑπÔ∏è  No files to clean in Temporary files (TEST)[0m
[34m‚ÑπÔ∏è  No files to clean in Backup files (TEST)[0m
[32m‚úÖ Cleanup completed: 1 files cleaned, 0 errors[0m
[32m‚úÖ Pre-cleanup completed: 1 files removed[0m
[36m
SETUP. Setting up test environment[0m
[34m‚ÑπÔ∏è  Setting up application directories...[0m
[34m‚ÑπÔ∏è  App directory already exists: ./mock-data[0m
[34m‚ÑπÔ∏è  App directory already exists: ./logs[0m
[34m‚ÑπÔ∏è  Setting up test artifact directories...[0m
[34m‚ÑπÔ∏è  Test directory already exists: ./cache[0m
[34m‚ÑπÔ∏è  Test directory already exists: ./temp[0m
[34m‚ÑπÔ∏è  Test directory already exists: ./backup[0m
[34m‚ÑπÔ∏è  Test directory already exists: ./test-results[0m
[36m
CREATE-TEST-FILES. Creating test files to verify cleanup[0m
[34m‚ÑπÔ∏è  Created test file: mock-data/test-match.json[0m
[34m‚ÑπÔ∏è  Created test file: mock-data/test-player.json[0m
[34m‚ÑπÔ∏è  Created test file: cache/test-cache.json[0m
[34m‚ÑπÔ∏è  Created test file: logs/test.log[0m
[34m‚ÑπÔ∏è  Created test file: test-results/test-result.json[0m
[34m‚ÑπÔ∏è  Created test file: temp/temp-file.tmp[0m
[34m‚ÑπÔ∏è  Created test file: backup/backup.bak[0m
[34m‚ÑπÔ∏è  Created test file: test-pattern.json[0m
[34m‚ÑπÔ∏è  Created test file: mock-data.json[0m
[32m‚úÖ Created 9 test files for cleanup verification[0m
[32m‚úÖ Test environment setup complete (0 directories created: 0 app, 0 test)[0m
[35m
==================================================[0m
[36m
1. Testing Queue Status Endpoint[0m
[34m‚ÑπÔ∏è  Services found: 0[0m
[32m‚úÖ Queue status endpoint working correctly[0m
[34m‚ÑπÔ∏è  Services: (none)[0m
[34m‚ÑπÔ∏è  Timestamp: 2025-07-03T02:13:30.841Z[0m
[35m
==================================================[0m
[36m
2. Testing Team Import and Match Discovery[0m
[31m‚ùå Test "Team Import" failed: Team import failed with status 202[0m
[35m
==================================================[0m
[36m
3. Testing Match Data Fetching[0m
[34m‚ÑπÔ∏è  Match data queued, polling for completion...[0m
[34m‚ÑπÔ∏è  Polling attempt 1/15[0m
[32m‚úÖ Data is ready![0m
[32m‚úÖ Match data fetched successfully[0m
[34m‚ÑπÔ∏è  Match ID: 1234567890[0m
[34m‚ÑπÔ∏è  Players: 10[0m
[32m‚úÖ Mock file valid: /Users/samreenzarroug/git/personal/dota-data/mock-data/opendota-match-1234567890.json[0m
[32m‚úÖ Cache file valid: /Users/samreenzarroug/git/personal/dota-data/mock-data/cache-opendota-match-1234567890.json[0m
[35m
==================================================[0m
[36m
4. Testing Player Data Fetching[0m
[31m‚ùå Test "Player Data" failed: Player data endpoint returned 202[0m
[35m
==================================================[0m
[36m
5. Testing Force Refresh Functionality[0m
[31m‚ùå Test "Force Refresh" failed: Force refresh failed with status 500[0m
[35m
==================================================[0m
[36m
6. Testing Cache Invalidation[0m
[36m
3. Testing Match Data Fetching[0m
[31m‚ùå Test "Cache Invalidation" failed: Match data fetch failed with status 500[0m
[35m
==================================================[0m
[36m
7. Testing Concurrent Request Handling[0m
[34m‚ÑπÔ∏è  Making 3 concurrent match requests...[0m
[31m‚ùå Test "Concurrent Requests" failed: Concurrent request 1 failed with status 500[0m
[35m
==================================================[0m
[36m
8. Testing Error Handling[0m
[33m‚ö†Ô∏è  Unexpected response for invalid team ID: 500[0m
[33m‚ö†Ô∏è  Unexpected response for invalid match ID: 500[0m
[35m
==================================================[0m
[1müìä Test Results Summary[0m
[34mDuration: 4.56 seconds[0m
[32mPassed: 3[0m
[31mFailed: 5[0m
[34mTotal: 8[0m
[1m
Detailed Results:[0m
[32m‚úÖ Queue Status: PASSED[0m
[31m‚ùå Team Import: FAILED[0m
[31m   Error: Team import failed with status 202[0m
[32m‚úÖ Match Data: PASSED[0m
[31m‚ùå Player Data: FAILED[0m
[31m   Error: Player data endpoint returned 202[0m
[31m‚ùå Force Refresh: FAILED[0m
[31m   Error: Force refresh failed with status 500[0m
[31m‚ùå Cache Invalidation: FAILED[0m
[31m   Error: Match data fetch failed with status 500[0m
[31m‚ùå Concurrent Requests: FAILED[0m
[31m   Error: Concurrent request 1 failed with status 500[0m
[32m‚úÖ Error Handling: PASSED[0m
[36m
CLEANUP. Cleaning up test files and cache[0m
[34m‚ÑπÔ∏è  Deleted file: mock-data/cache-opendota-match-1234567890.json[0m
[34m‚ÑπÔ∏è  Deleted file: mock-data/opendota-match-1234567890.json[0m
[34m‚ÑπÔ∏è  Deleted file: mock-data/test-match.json[0m
[34m‚ÑπÔ∏è  Deleted file: mock-data/test-player.json[0m
[32m‚úÖ Cleaned up 4 files from Mock data files (APP)[0m
[34m‚ÑπÔ∏è  Deleted file: logs/server.log[0m
[34m‚ÑπÔ∏è  Deleted file: logs/test.log[0m
[32m‚úÖ Cleaned up 2 files from Server log files (APP)[0m
[34m‚ÑπÔ∏è  Deleted file: cache/test-cache.json[0m
[32m‚úÖ Cleaned up 1 files from Cache files (TEST)[0m
[34m‚ÑπÔ∏è  Deleted file: test-results/test-result.json[0m
[32m‚úÖ Cleaned up 1 files from Test result files (TEST)[0m
[34m‚ÑπÔ∏è  Deleted file: temp/temp-file.tmp[0m
[32m‚úÖ Cleaned up 1 files from Temporary files (TEST)[0m
[34m‚ÑπÔ∏è  Deleted file: backup/backup.bak[0m
[32m‚úÖ Cleaned up 1 files from Backup files (TEST)[0m
[34m‚ÑπÔ∏è  Deleted pattern file: mock-data.json[0m
[34m‚ÑπÔ∏è  Deleted pattern file: test-pattern.json[0m
[32m‚úÖ Cleaned up 2 pattern files[0m
[32m‚úÖ Cleanup completed: 12 files cleaned, 0 errors[0m
[36m
VERIFY. Verifying cleanup was successful[0m
[32m‚úÖ Mock data directory (APP) is empty (cleanup successful)[0m
[32m‚úÖ Server logs directory (APP) is empty (cleanup successful)[0m
[32m‚úÖ Cache directory (TEST) is empty (cleanup successful)[0m
[32m‚úÖ Test results directory (TEST) is empty (cleanup successful)[0m
[32m‚úÖ Temporary files directory (TEST) is empty (cleanup successful)[0m
[32m‚úÖ Backup files directory (TEST) is empty (cleanup successful)[0m
[32m‚úÖ No remaining pattern files found[0m
[32m‚úÖ All cleanup verification passed![0m
[35m
==================================================[0m
[1müßπ Cleanup Summary[0m
[34mFiles cleaned: 12[0m
[32mCleanup errors: 0[0m
[32mFiles remaining: 0[0m
[32mVerification errors: 0[0m
[31m
üí• Some tests failed. Please check the implementation.[0m
